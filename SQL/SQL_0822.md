# JOIN

>í…Œì´ë¸” ê²°í•©(join)

- ì—¬ëŸ¬ í…Œì´ë¸”ë¡œ ë‚˜ëˆ  ì €ì¥í•˜ê²Œ ë˜ë©°, ì—¬ëŸ¬ í…Œì´ë¸”ì„ ê²°í•©í•˜ì—¬ ì¶œë ¥í•˜ì—¬ í™œìš©

- ì¼ë°˜ì ìœ¼ë¡œ ë ˆì½”ë“œëŠ” ê¸°ë³¸í‚¤(`PK`)ë‚˜ ì™¸ë˜í‚¤(`FK`) ê°’ì˜ ê´€ê²Œì— ì˜í•´ ê²°í•©
- ë§ì€ ë ˆì½”ë“œë“¤ì´ ë³€ê²½ë˜ì–´ì•¼ í•˜ëŠ” ìƒí™©ì´ ë°œìƒ
- ë‹¤ë¥¸ í…Œì´ë¸”ì˜ ê³ ìœ  í‚¤ë¥¼ ê°€ì ¸ì™€ì„œ ì‚¬ìš©í•˜ëŠ” ì™¸ë˜í‚¤(`FK`)

- ğŸ’¡ í…Œì´ë¸”ì„ ì—¬ëŸ¬ í…Œì´ë¸”ë¡œ ë‚˜ëˆ ì„œ ê´€ë¦¬í•˜ëŠ” ì´ìœ  ?

  ë°ì´í„°ê°€ ì—…ë°ì´íŠ¸ë  ë•Œ ë ˆì½”ë“œê°’ì„ ë³€ê²½í•˜ê²Œ ë˜ë©´ ë„ˆë¬´ ë§ì€ ë³€ê²½ì´ í•„ìš”í•˜ë¯€ë¡œ,

  íš¨ìœ¨ì ì¸ ê´€ë¦¬ë¥¼ ìœ„í•´ì„œ ë‹¤ë¥¸ í…Œì´ë¸”ì˜ id ë“±ì„ ì°¸ì¡°í•˜ì—¬ ê°€ì ¸ì˜¤ëŠ” í˜•ì‹ ë“±ìœ¼ë¡œ ê´€ë¦¬

  

## JOINì˜ ëŒ€í‘œ ì¢…ë¥˜

### INNER JOIN

>ë‘ í…Œì´ë¸”ì— **ëª¨ë‘ ì¼ì¹˜**í•˜ëŠ” í–‰ë§Œ ë°˜í™˜(`êµì§‘í•©`ì„ ë°˜í™˜)

  ```sql
  SELECT *
  FROM users JOIN role
      ON users.role_id = role.id;
  ```

  ```sql
  SELECT * FROM `í…Œì´ë¸”1` JOIN `í…Œì´ë¸”2` ON `í…Œì´ë¸”1.ì¹¼ëŸ¼` = `í…Œì´ë¸”2.ì¹¼ëŸ¼`;  
  ```

  **JOIN**ì— **JOIN**ë„ **ê°€ëŠ¥í•˜ë‹¤**. (ë‹¨, **JOIN**ì€ í…Œì´ë¸” ìˆ˜ì˜ -1 ë²ˆê¹Œì§€ë§Œ ê°€ëŠ¥)

ëª¨ë“  ìƒí™©ì—ì„œ JOINì„ ì„œë¸Œì¿¼ë¦¬ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆëŠ”ê°€? (X)

í•˜ì§€ë§Œ ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì˜¤ëŠ” ìƒí™©ì´ ìˆì„ ìˆ˜ ìˆë‹¤.



### OUTER JOIN

> ë™ì¼í•œ ê°’ì´ ì—†ëŠ” í–‰ë„ ë°˜í™˜, ë™ì¼í•œ ê°’ì´ ì—†ëŠ” í–‰ì€ NULLë¡œ ë°˜í™˜

- LEFT OUTER JOIN

  ì¡°ì¸ ìˆ˜í–‰ì‹œ ë¨¼ì € í‘œê¸°ëœ **ì²« ë²ˆì§¸ í…Œì´ë¸”ì— í•´ë‹¹í•˜ëŠ” ë°ì´í„°ë¥¼ ë¨¼ì € ì½ì€ í›„**, 

  ë‚˜ì¤‘ í‘œê¸°ëœ ë‘ ë²ˆì§¸ í…Œì´ë¸”ì—ì„œ JOIN ëŒ€ìƒ ë°ì´í„°ë¥¼ ì½ì–´ ì˜¨ë‹¤. 

  ì¦‰, Table Aì™€ Bê°€ ìˆì„ ë•Œ ( Table 'A'ê°€ ê¸°ì¤€ì´ ë¨), Aì™€ Bë¥¼ ë¹„êµí•´ì„œ Bì˜ JOIN ì¹¼ëŸ¼ì—ì„œ 

  ê°™ì€ ê°’ì´ ìˆì„ ë•Œ ê·¸ í•´ë‹¹ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³ , Bì˜ JOINì¹¼ëŸ¼ì—ì„œ 

  ê°™ì€ ê°’ì´ ì—†ëŠ” ê²½ìš°ì—ëŠ” ë‘ ë²ˆì§¸ í…Œì´ë¸”ì—ì„œ ê°€ì ¸ì˜¤ëŠ” ì¹¼ëŸ¼ë“¤ì€ NULL ê°’ìœ¼ë¡œ ì±„ìš´ë‹¤.

- LEFT JOIN ì€ ì²« ë²ˆì§¸ í…Œì´ë¸”(ì¢Œì¸¡)ì„ ê¸°ì¤€ìœ¼ë¡œ ëª¨ë“  í–‰ì„ ì¶œë ¥í•˜ê³ , RIGHT JOINì€ ë‘ ë²ˆì§¸ í…Œì´ë¸”(ìš°ì¸¡)ì„ ê¸°ì¤€ìœ¼ë¡œ ëª¨ë“  í–‰ì„ ì¶œë ¥

  ```sql
  sqlite> SELECT *
     ...> FROM articles
     ...>     LEFT JOIN users
     ...>     ON articles.user_id = users.id;
     
  id  title  content  user_id  id  name  role_id
  --  -----  -------  -------  --  ----  -------
  1   1ë²ˆê¸€    111      1        1   ê´€ë¦¬ì   1
  2   2ë²ˆê¸€    222      2        2   ê¹€ì² ìˆ˜   2
  3   3ë²ˆê¸€    333      1        1   ê´€ë¦¬ì   1
  4   4ë²ˆê¸€    444
  ```

  ```sql
  sqlite> SELECT *
     ...> FROM articles
     ...>     RIGHT JOIN users
     ...>     ON articles.user_id = users.id;
     
  id  title  content  user_id  id  name  role_id
  --  -----  -------  -------  --  ----  -------
  1   1ë²ˆê¸€    111      1        1   ê´€ë¦¬ì   1
  2   2ë²ˆê¸€    222      2        2   ê¹€ì² ìˆ˜   2
  3   3ë²ˆê¸€    333      1        1   ê´€ë¦¬ì   1
                               3   ì´ì˜í¬   2
  ```

- FULL OUTER JOIN

  ```sql
  sqlite> SELECT *
     ...> FROM articles
     ...>     FULL OUTER JOIN users
     ...>     ON users.id = articles.user_id;
     
  id  title  content  user_id  id  name  role_id
  --  -----  -------  -------  --  ----  -------
  1   1ë²ˆê¸€    111      1        1   ê´€ë¦¬ì   1
  2   2ë²ˆê¸€    222      2        2   ê¹€ì² ìˆ˜   2
  3   3ë²ˆê¸€    333      1        1   ê´€ë¦¬ì   1
  4   4ë²ˆê¸€    444
                               3   ì´ì˜í¬   2
  ```

  

### CROSS JOIN

> ëª¨ë“  ê°€ëŠ¥í•œ ê²½ìš°ì˜ ìˆ˜ì˜ Join

```sql
SELECT *
FROM users CROSS JOIN role;
```



### JOIN ON JOIN ON

> ê° ì—­í•  ë³„ ì‘ì„±í•œ ê²Œì‹œê¸€ì˜ ìˆ˜

```SQL
sqlite> SELECT *, COUNT(*)
   ...> FROM articles A
   ...>     JOIN users B
   ...>     ON A.user_id = B.id
   ...>     JOIN role C
   ...>     ON B.role_id = C.id
   ...>     GROUP BY C.id;
   
id  title  content  user_id  id  name  role_id  id  title  COUNT(*)
--  -----  -------  -------  --  ----  -------  --  -----  --------
1   1ë²ˆê¸€    111      1        1   ê´€ë¦¬ì   1        1   admin  2
2   2ë²ˆê¸€    222      2        2   ê¹€ì² ìˆ˜   2        2   staff  1
```

